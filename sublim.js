!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SublimJs",[],e):"object"==typeof exports?exports.SublimJs=e():t.SublimJs=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),r=n(10),i=n(11),u=new(n(12).default),s=new o.default(u);e.joyService=s;var c=new r.default(u);e.menuService=c;var f=new i.default(u);e.roomService=f,e.boot=function(){console.log("Booting services"),u.open("wss://morning-ravine-33772.herokuapp.com/")},e.registerSocketOpen=function(t){return u.registerSocketOpen(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(4),i=function(){function t(t,e){var n=this;this.name=t,this.wsService=e,this.eventBus=new o.EventBus,this.wsService.registerService(this.serviceName,(function(t){n.eventBus.$emit(t.action,t.content)}))}return Object.defineProperty(t.prototype,"serviceName",{get:function(){return this.name},enumerable:!0,configurable:!0}),t.prototype.makeAction=function(t){var e=this,n=r.default.stringify(this.version,this.serviceName,t);return function(t){e.wsService.sendRaw(n+"|"+t)}},t.prototype.makeHardAction=function(t,e){var n=this,o=r.default.stringify(this.version,this.serviceName,t,e);return function(){n.wsService.sendRaw(o)}},t.prototype.registerCustomAction=function(t,e){return this.eventBus.$on(t,e)},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=function(){function t(){this.subscriptions={}}return t.prototype.$on=function(t,e){var n=this,r=o();return this.subscriptions[t]||(this.subscriptions[t]={}),this.subscriptions[t][r]=e,function(){delete n.subscriptions[t][r],0===Object.keys(n.subscriptions[t]).length&&delete n.subscriptions[t]}},t.prototype.$emit=function(t,e){void 0===e&&(e={}),t in this.subscriptions&&Object.values(this.subscriptions[t]).forEach((function(t){t(e)}))},t}();e.EventBus=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.parse=function(t){var e=t.split("|",5);return{version:e[0],service:e[1],action:e[2],content:e[3],user_id:e[4]}},t.stringify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.join("|")},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(6);e.ActionButtonBase=o.default;var r=n(13);e.MenuButtonBase=r.default;var i=n(14);e.JoypadBase=i.default;var u=n(15);e.JoystickBase=u.default;var s=n(0);s.boot();var c={joyService:s.joyService,roomService:s.roomService,menuService:s.menuService};e.services=c,e.onSublimReady=function(t){return s.registerSocketOpen(t)},e.joinRoom=function(t){s.roomService.join(t)}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),u=n(0),s=function(t){function e(e){var n=t.call(this)||this;return n.sendButtonDown=u.joyService.makeHardAction(e,"down"),n.sendButtonUp=u.joyService.makeHardAction(e,"up"),n}return r(e,t),e}(i.default);e.default=s},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,"Joy",e)||this;return n.version=1,n.positionAction=n.makeAction("Position"),n}return r(e,t),e.prototype.registerNotifyAction=function(t){return this.eventBus.$on("Notify",t)},e.prototype.registerSetIconAction=function(t){return this.eventBus.$on("Icon",t)},e.prototype.registerVibrateAction=function(t){return this.eventBus.$on("Vibrate",t)},e.prototype.position=function(t,e){this.positionAction(t.toFixed(0)+"_"+e.toFixed(0))},e}(n(1).default);e.default=i},function(t,e,n){(function(e){var n=e&&e.pid?e.pid.toString(36):"";function o(){var t=Date.now(),e=o.last||t;return o.last=t>e?t:e+1}t.exports=t.exports.default=function(t,e){return(t||"")+""+n+o().toString(36)+(e||"")},t.exports.process=function(t,e){return(t||"")+n+o().toString(36)+(e||"")},t.exports.time=function(t,e){return(t||"")+o().toString(36)+(e||"")}}).call(this,n(9))},function(t,e){var n,o,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{o="function"==typeof clearTimeout?clearTimeout:u}catch(t){o=u}}();var c,f=[],a=!1,p=-1;function l(){a&&c&&(a=!1,c.length?f=c.concat(f):p=-1,f.length&&v())}function v(){if(!a){var t=s(l);a=!0;for(var e=f.length;e;){for(c=f,f=[];++p<e;)c&&c[p].run();p=-1,e=f.length}c=null,a=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===u||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new d(t,e)),1!==f.length||a||s(v)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,"Menu",e)||this;return n.version=1,n.toggleDown=n.makeHardAction("Toggle","down"),n.toggleUp=n.makeHardAction("Toggle","up"),n}return r(e,t),e}(n(1).default);e.default=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,"Room",e)||this;return n.version=1,n.joinAction=n.makeAction("Join"),n.leaveAction=n.makeAction("Leave"),n.setRoomSettingAction=n.makeAction("SetRoomSetting"),n.deleteRoomSettingAction=n.makeAction("DeleteRoomSetting"),n.eventBus.$on("SetRoomSetting",n.setRoomSettingEvent.bind(n)),n.eventBus.$on("ListRoomSettings",n.fillRoomSettingsEvent.bind(n)),n}return r(e,t),e.prototype.setRoomSettingEvent=function(t){var e=t.split("="),n=e[0],o=e[1];this.eventBus.$emit("SettingUpdated:"+n,o),this.settings[n]=o},e.prototype.fillRoomSettingsEvent=function(t){var e=this,n=JSON.parse(t);Object.keys(n).forEach((function(t){e.eventBus.$emit("SettingUpdated:"+t,n[t])})),this.settings=n},e.prototype.registerSettingUpdated=function(t,e){this.eventBus.$on("SettingUpdated:"+t,e)},e.prototype.registerSettingDeleted=function(t,e){this.eventBus.$on("SettingDeleted:"+t,e)},e.prototype.deleteRoomSetting=function(t){this.eventBus.$emit("SettingDeleted:"+t),this.deleteRoomSettingAction(t)},e.prototype.setRoomSetting=function(t,e){this.setRoomSettingAction(t+"="+e)},e.prototype.setRoomFlag=function(t){this.setRoomSettingAction(t)},e.prototype.join=function(t){this.joinAction(t)},e.prototype.leave=function(t){this.leaveAction(t)},e}(n(1).default);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),r=n(3),i=function(){function t(){this.eventBus=new r.EventBus}return Object.defineProperty(t.prototype,"isConnected",{get:function(){return!!this.socket},enumerable:!0,configurable:!0}),t.prototype.open=function(t){var e=this;this.socket||(this.socket=new WebSocket(t),this.socket.onmessage=function(t){var n=o.default.parse(t.data);e.eventBus.$emit(n.service+"ServiceMessage",n)},this.socket.onopen=function(){e.eventBus.$emit("socketOpen")},this.socket.onerror=function(t){e.eventBus.$emit("socketError")},this.socket.onclose=function(t){e.eventBus.$emit("socketClose",{event:t})})},t.prototype.registerService=function(t,e){return this.eventBus.$on(t+"ServiceMessage",e)},t.prototype.registerSocketOpen=function(t){return this.eventBus.$on("socketOpen",t)},t.prototype.registerSocketError=function(t){return this.eventBus.$on("socketError",t)},t.prototype.registerSocketClose=function(t){return this.eventBus.$on("socketClose",t)},t.prototype.close=function(){this.socket&&(this.socket.close(),this.socket=null)},t.prototype.send=function(t,e,n,r){return this.socket.send(o.default.stringify(t,e,n,r))},t.prototype.sendRaw=function(t){return this.socket.send(t)},t}();e.default=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),u=n(0),s=function(t){function e(){var e=t.call(this)||this;return e.sendButtonDown=u.menuService.toggleDown,e.sendButtonUp=u.menuService.toggleUp,e}return r(e,t),e}(i.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(){function t(){var t=this;this.unregisterEvents=[o.joyService.registerNotifyAction((function(e){t.doNotifyAction(e)})),o.joyService.registerSetIconAction((function(e){t.doSetIconAction(e)})),o.joyService.registerVibrateAction((function(e){t.doVibrateAction(e)}))]}return t.prototype.doNotifyAction=function(t){},t.prototype.doSetIconAction=function(t){},t.prototype.doVibrateAction=function(t){},t.prototype.unregister=function(){this.unregisterEvents.forEach((function(t){t()}))},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=function(){function t(){this.x=0,this.y=0}return t.prototype.updatePosition=function(t,e){t===this.x&&e===this.y||(this.x=t,this.y=e,o.joyService.position(t,e))},t}();e.default=r}])}));